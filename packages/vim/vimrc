" VIM Configuration
set nocompatible          " Cancel the compatibility with Vi

" Define the plugins
source ~/.vim/plugins.vim

" Use space as leader
let mapleader = "\<Space>"

" Disable space moves cursor in non editing mode
noremap <Space> <nop>
vnoremap <Space> <nop>

" disable usage of Ctrl-J as Enter in command mode
cnoremap <C-J> <nop>

" remove ex mode binding
nmap Q <nop>

" Activate syntax coloring
syntax enable

" Show keys typed in status line
set showcmd

" Do not show mode in last line
" since already present in status line
set noshowmode

" -- Display
set title                 " Update the title of your window or your terminal
set relativenumber        " Display relative line numbers
set ruler                 " Display cursor position
set nowrap                " Don't wrap lines when they are too long
set sidescroll=10         " horizontal scroll of columns
set cursorline            " highlight the current line
set scrolloff=3           " Display at least 3 lines around you cursor
                          " (for scrolling)

" -- Beep
set novisualbell          " Prevent Vim from beeping
set noerrorbells          " Prevent Vim from beeping

" Backspace behaves as expected
set backspace=indent,eol,start

" -- Tabs
set tabstop=4       " number of visual spaces per tab
set softtabstop=4   " number of spaces in tab when editing
set expandtab       " tabs are spaces when editing
set shiftwidth=4    " size of an indentation
set smarttab        " tab makes cursor goes to next indent when editing new line

" Visual autocomplete for command menu
set wildmenu

" Define files to ignore in globbing / expanding / ...
set wildignore+=*~,*.swp

" automatically reload file when modified outside of vim
" and not modified locally
set autoread

" Hide buffer (file) instead of abandoning when switching
" to another buffer
set hidden

" Activate specific behavior per file type such as syntax and indentation
filetype on
filetype plugin on
filetype indent on

" Decrease silent time before swap file gets written
set updatetime=500

" Go to insert mode after/before 2 newlines
nmap 2o A<CR><CR>
nmap 2O I<CR><CR><Esc>kki

" correct joining of lines if comments
set formatoptions+=j

" faster access to grep help files
cnoreabbrev H helpgrep

" Enable swap / backup / undo files for buffers
" and store them preferably separately from the edited file location
" ^= means prepend to the default directories list
" // means use the full file path as name (prevent name collisions)
set swapfile
set backup
set undofile
set directory^=~/.vim/swap//
set backupdir^=~/.vim/backup//
set undodir^=~/.vim/undo//
set viminfo+=n~/.vim/viminfo

" Define special characters highlight display
set listchars=extends:>,tab:>\ ,trail:·
set list

" lighter vertical split display
set fillchars+=vert:│

" Mail config
autocmd FileType mail setlocal formatoptions+=aw textwidth=72

" Load all conf files with their possible
let s:find_conf_cmd = "find ~/.vim/config.d/ -maxdepth 1 -name '*.vim'"
let s:conf_files = glob("`" . s:find_conf_cmd . "`")
for conf in split(s:conf_files, '\n')
  exe 'source' conf
endfor

" Load all plugins conf files with their possible
let s:find_plugins_conf_cmd = "find ~/.vim/config.d/plugins -name '*.vim'"
let s:plugins_conf_files = glob("`" . s:find_plugins_conf_cmd . "`")
for conf in split(s:plugins_conf_files, '\n')
  exe 'source' conf
endfor
