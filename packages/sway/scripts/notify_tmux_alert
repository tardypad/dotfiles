#!/bin/sh

TYPE="$1"
SOCKET_NAME="$2"
SESSION_ID="$3"
SESSION_NAME="$4"
WINDOW_ID="$5"
WINDOW_NAME="$6"

MESSAGE="socket: ${SOCKET_NAME}\n"
MESSAGE="${MESSAGE}session: ${SESSION_NAME}\n"
MESSAGE="${MESSAGE}window: ${WINDOW_NAME}"

MARK=_tmux_alert
MARK="${MARK}_${SOCKET_NAME}"
MARK="${MARK}_${SESSION_ID}"
MARK="${MARK}_${WINDOW_ID}"

notify \
  -c 'notice' \
  -i "${MARK}" \
  "Tmux ${TYPE} detected" \
  "${MESSAGE}"

swaymsg -q "[con_mark=\"${MARK}\"]" urgent enable
