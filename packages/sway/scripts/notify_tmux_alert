#!/usr/bin/env zsh

# #IDEA: improve this notification with sway window/workspace urgent flag

# #HACK: when triggered from another session, the hook is run multiple times
# this should preferably  be fixed on the tmux side
makoctl dismiss --all

TYPE="$1"
SOCKET_NAME="$2"
SESSION_NAME="$3"
WINDOW_NAME="$4"

MESSAGE="socket: ${SOCKET_NAME}\n"
MESSAGE+="session: ${SESSION_NAME}\n"
MESSAGE+="window: ${WINDOW_NAME}"

notify-send \
  --category 'notice' \
  "Tmux ${TYPE} detected" \
  "${MESSAGE}"
