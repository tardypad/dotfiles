#!/usr/bin/env zsh

TYPE="$1"
SOCKET_NAME="$2"
SESSION_ID="$3"
SESSION_NAME="$4"
WINDOW_ID="$5"
WINDOW_NAME="$6"

MESSAGE="socket: ${SOCKET_NAME}\n"
MESSAGE+="session: ${SESSION_NAME}\n"
MESSAGE+="window: ${WINDOW_NAME}"

MARK=_tmux_alert
MARK+="_${SOCKET_NAME}"
MARK+="_${SESSION_ID}"
MARK+="_${WINDOW_ID}"

notify \
  --category 'notice' \
  --identifier "${MARK}" \
  "Tmux ${TYPE} detected" \
  "${MESSAGE}"

swaymsg --quiet "[con_mark=\"${MARK}\"]" urgent enable
