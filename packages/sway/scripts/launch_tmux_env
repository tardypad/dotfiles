#!/bin/sh

ENV_NAME="$1"

SESSION=$(
  {
    echo NEW;
    find "${XDG_CONFIG_HOME:-$HOME/.config}/tmux/env/${ENV_NAME}" \
      -type f -name '*.sh' -exec basename {} .sh \;
  } \
  | fzf_launcher "open ${ENV_NAME%s} "
)

[ -n "${SESSION}" ] || exit

[ "${SESSION}" = 'NEW' ] && SESSION=

app_tmux_env "${ENV_NAME}" "${SESSION}"
