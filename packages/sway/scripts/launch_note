#! /usr/bin/env zsh

NOTES_FOLDER="$( xdg-user-dir NOTES )"

NOTE=$(
  {
    echo NEW;
    ls "${NOTES_FOLDER}";
  } \
  | fzf --reverse \
        --no-multi \
        --margin 1,2,0,2 \
        --prompt 'open note ' \
        --color info:{color/background/number} \
)

[[ -n "${NOTE}" ]] || exit

if [[ "${NOTE}" == 'NEW' ]]; then
  read '?filename: ' NOTE
fi

swaymsg --quiet exec \
  "termite \
   --title 'ï‰‰ Notes' \
   --exec 'tmux new-session \"vim ${NOTES_FOLDER}/${NOTE}\"'"
