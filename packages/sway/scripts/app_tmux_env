#! /usr/bin/env zsh

TITLE="$1"
ENV_NAME="$2"
SESSIONS_NAME=( ${@:3} )

# create env in background
# will do nothing if already exists
tmux-env --background "${ENV_NAME}" ${SESSIONS_NAME}

# try to focus existing window if it exists
focus_window_title "${TITLE}" && exit

# launch new app otherwise in new workspace
# needs TERM defined properly beforehand
# for proper color within vim
create_workspace "${ENV_NAME}"
swaymsg --quiet exec \
  "termite \
   --title \"${TITLE}\" \
   --exec 'zsh -c \"tmux-env ${ENV_NAME} ${SESSIONS_NAME}\"'"
