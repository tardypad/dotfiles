#! /usr/bin/env zsh

typeset -A LIST

LIST=(
  'Cool'                 '(⌐■_■)'
  'Copyright'            '©'
  'Degree'               '°'
  'Euro'                 '€'
  'Flipping table'       '(╯°□°)╯︵┻━┻'
  'Happy Gary'           'ᕕ(ᐛ)ᕗ'
  'Look of Disapproval'  'ಠ_ಠ'
  'Registered'           '®'
  'Shrug'                '¯\_(ツ)_/¯'
  'Trademark'            '™'
)


TYPE=$(
  for NAME in "${(@k)LIST}"; do
    echo "${NAME}@${LIST[$NAME]}"
  done \
    | sort \
    | column --table --table-right 2 \
             --separator '@' --output-separator '     ' \
    | fzf --reverse \
          --no-multi \
          --margin 1,2,0,2 \
          --prompt 'copy ' \
          --color info:{color/background/number}
)

[[ -n "${TYPE}" ]] || exit

for NAME in "${(@k)LIST}"; do
  # regex comparison don't seem to work on some non ASCII characters
  # so we check only the name part
  if [[ "${TYPE}" =~ "${NAME}     .*" ]]; then
    wl-copy "$LIST[${NAME}]"
    exit
  fi
done
