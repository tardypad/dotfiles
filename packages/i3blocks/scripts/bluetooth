#! /usr/bin/env zsh

# #TODO: take into account multiple connected devices

BLUETOOTH_INFO=$( bluetoothctl info )

# only display something if a device is connected
if ! echo "${BLUETOOTH_INFO}" \
     | grep --quiet 'Connected: yes'; then
  exit 0
fi

BLUETOOTH_DEVICE_ALIAS=$(
  echo "${BLUETOOTH_INFO}" \
    | grep Alias \
    | sed 's/.*Alias: \(.*\)/\1/'
)

echo "<span foreground='#{{{base08/hex}}}'>ïŠ”</span> ${BLUETOOTH_DEVICE_ALIAS}"
