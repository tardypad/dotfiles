# define credentials variables for each account
source "gpg --quiet --decrypt ~/.mutt/accounts/gmail_work.gpg |"
source "gpg --quiet --decrypt ~/.mutt/accounts/gmail_perso.gpg |"
source "gpg --quiet --decrypt ~/.mutt/accounts/gandi.gpg |"

# set config per account
account-hook "$my_gmail_perso_email" "set imap_user=$my_gmail_perso_email imap_pass=$my_gmail_perso_password"
account-hook "$my_gmail_work_email" "set imap_user=$my_gmail_work_email imap_pass=$my_gmail_work_password"
account-hook "$my_gandi_email" "set imap_user=$my_gandi_email imap_pass=$my_gandi_password"
folder-hook . unmailboxes *
folder-hook "$my_gmail_perso_email" source "~/.mutt/accounts/gmail_perso"
folder-hook "$my_gmail_work_email" source "~/.mutt/accounts/gmail_work"
folder-hook "$my_gandi_email" source "~/.mutt/accounts/gandi"

# macros to change account
macro index <f1> "<change-folder>imaps://$my_gmail_perso_email@imap.gmail.com<enter>"
macro index <f2> "<change-folder>imaps://$my_gmail_work_email@imap.gmail.com<enter>"
macro index <f3> "<change-folder>imaps://$my_gandi_email@mail.gandi.net<enter>"

# switch to default account
source "~/.mutt/accounts/gmail_perso"

source "~/.mutt/colors"

# view html mail directly in pager
auto_view text/html

# prefer plain text over html
alternative_order text/plain text/enriched text/html

# display sidebar by default
set sidebar_visible = yes

# shorten mailbox names in sidebar
set sidebar_short_path = yes

# indent shortened mailbox names in sidebar
set sidebar_folder_indent = yes

# bindings for sidebar navigation
bind index,pager \CK sidebar-prev
bind index,pager \CJ sidebar-next
bind index,pager \CO sidebar-open
