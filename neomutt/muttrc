# define credentials variables for each account
source "gpg --quiet --decrypt ~/.mutt/conf/accounts/gmail_work.gpg |"
source "gpg --quiet --decrypt ~/.mutt/conf/accounts/gmail_perso.gpg |"
source "gpg --quiet --decrypt ~/.mutt/conf/accounts/gandi.gpg |"

# set config per account
account-hook "$my_gmail_perso_email" "set imap_user=$my_gmail_perso_email imap_pass=$my_gmail_perso_password"
account-hook "$my_gmail_work_email" "set imap_user=$my_gmail_work_email imap_pass=$my_gmail_work_password"
account-hook "$my_gandi_email" "set imap_user=$my_gandi_email imap_pass=$my_gandi_password"
folder-hook . unmailboxes *
folder-hook "$my_gmail_perso_email" source "~/.mutt/conf/accounts/gmail_perso"
folder-hook "$my_gmail_work_email" source "~/.mutt/conf/accounts/gmail_work"
folder-hook "$my_gandi_email" source "~/.mutt/conf/accounts/gandi"

# macros to change account
macro index <f1> "<change-folder>imaps://$my_gmail_perso_email@imap.gmail.com<enter>"
macro index <f2> "<change-folder>imaps://$my_gmail_work_email@imap.gmail.com<enter>"
macro index <f3> "<change-folder>imaps://$my_gandi_email@mail.gandi.net<enter>"

# switch to default account
source "~/.mutt/conf/accounts/gmail_perso"

source "~/.mutt/conf/colors"

# define some files and folders location
set header_cache = "~/.mutt/cache/headers"
set message_cachedir = "~/.mutt/cache/bodies"
set mailcap_path = "~/.mutt/conf/mailcap"
set tmpdir = "~/.mutt/tmp"

# view html mail directly in pager
auto_view text/html

# prefer plain text over html
alternative_order text/plain text/enriched text/html

# display sidebar by default
set sidebar_visible = yes

# shorten mailbox names in sidebar
set sidebar_short_path = yes

# indent shortened mailbox names in sidebar
set sidebar_folder_indent = yes

# don't wait for a key press after external commands
set wait_key = no

# don't ask for confirmation to delete mail on closing or synchronizing
set delete = yes

# bindings for sidebar navigation
bind index,pager \CK sidebar-prev
bind index,pager \CJ sidebar-next
bind index,pager \CO sidebar-open

# sorting mails in threads with more recent ones first
set sort = threads
set sort_aux = reverse-last-date-received

# maxixum number of lines from index to display above the pager
set pager_index_lines = 20

# number of context lines in next/previous page in pager
set pager_context = 3

# don't go to next message at the end of the current message in pager
set pager_stop = yes

# do not pause to display informational message when switching folder
set sleep_time = 0
