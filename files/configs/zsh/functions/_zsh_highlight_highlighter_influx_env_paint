[[ ! "${BUFFER}" =~ '^influx-env ' ]] && return

local keywords=(
all
alter
any
as
asc
begin
by
continuous
create
database
databases
default
delete
desc
destinations
diagnostics
distinct
drop
duration
end
every
explain
field
for
from
grant
grants
group
groups
in
inf
insert
into
key
keys
kill
limit
measurement
measurements
name
offset
on
order
password
policies
policy
privileges
queries
query
read
replication
resample
retention
revoke
select
series
set
shard
shards
show
slimit
soffset
stats
subscription
subscriptions
tag
to
user
users
values
where
with
write
)

local start_ix=1 ix cur_word

for ix in $( seq 1 ${#BUFFER} ); do
  if [[ $BUFFER[$ix] == ' ' ]]; then
    cur_word=$BUFFER[$start_ix,$ix-1]
    if (( $keywords[(Ie)${cur_word:l}] )); then
      _zsh_highlight_add_highlight $(( start_ix - 1 )) $ix influx_env
    fi
    start_ix=$(( ix + 1 ))
  fi
done
