[[ ! "${BUFFER}" =~ '^redis-env ' ]] && return

local keywords=(
addslots
append
auth
bgrewriteaof
bgsave
bitcount
bitfield
bitop
bitpos
blpop
brpop
brpoplpush
bumpepoch
bzpopmax
bzpopmin
client
cluster
command
config
count
count-failure-reports
countkeysinslot
dbsize
debug
decr
decrby
del
delslots
discard
doctor
dump
echo
eval
evalsha
exec
exists
expire
expireat
failover
flush
flushall
flushdb
flushslots
forget
geoadd
geodist
geohash
geopos
georadius
georadiusbymember
get
getbit
getkeys
getkeysinslot
getname
getrange
getset
graph
hdel
help
hexists
hget
hgetall
hincrby
hincrbyfloat
history
hkeys
hlen
hmget
hmset
hscan
hset
hsetnx
hstrlen
hvals
id
incr
incrby
incrbyfloat
info
keys
keyslot
kill
lastsave
latency
latest
lindex
linsert
list
llen
load
lolwut
lpop
lpush
lpushx
lrange
lrem
lset
ltrim
malloc-stats
meet
memory
mget
migrate
module
monitor
move
mset
msetnx
multi
myid
nodes
object
pause
persist
pexpire
pexpireat
pfadd
pfcount
pfmerge
ping
psetex
psubscribe
psync
pttl
publish
pubsub
punsubscribe
purge
quit
randomkey
readonly
readwrite
rename
renamenx
replicaof
replicas
replicate
reply
reset
resetstat
restore
rewrite
role
rpop
rpoplpush
rpush
rpushx
sadd
save
saveconfig
scan
scard
script
sdiff
sdiffstore
segfault
select
set
setbit
set-config-epoch
setex
setname
setnx
setrange
setslot
shutdown
sinter
sinterstore
sismember
slaveof
slaves
slots
slowlog
smembers
smove
sort
spop
srandmember
srem
sscan
stats
strlen
subscribe
sunion
sunionstore
swapdb
sync
time
touch
ttl
type
unblock
unlink
unload
unsubscribe
unwatch
usage
wait
watch
xack
xadd
xclaim
xdel
xgroup
xinfo
xlen
xpending
xrange
xread
xreadgroup
xrevrange
xtrim
zadd
zcard
zcount
zincrby
zinterstore
zlexcount
zpopmax
zpopmin
zrange
zrangebylex
zrangebyscore
zrank
zrem
zremrangebylex
zremrangebyrank
zremrangebyscore
zrevrange
zrevrangebylex
zrevrangebyscore
zrevrank
zscan
zscore
zunionstore
)

local start_ix=1 ix cur_word

for ix in $( seq 1 ${#BUFFER} ); do
  if [[ $BUFFER[$ix] == ' ' ]]; then
    cur_word=$BUFFER[$start_ix,$ix-1]
    if (( $keywords[(Ie)${cur_word:l}] )); then
      _zsh_highlight_add_highlight $(( start_ix - 1 )) $ix redis_env
    fi
    start_ix=$(( ix + 1 ))
  fi
done
