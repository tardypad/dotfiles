#!/bin/sh
# commands used:
# - ncmpcpp
# - sway-focus-window-title
# - swaymsg
# - systemctl
# - termite
# - tmux

TITLE='sway_music'

# try to focus existing window if it exists
sway-focus-window-title "${TITLE}" && exit

# launch music server and app otherwise
if ! systemctl --user is-active mopidy.service; then
  systemctl --user start mopidy.service
fi

swaymsg -q exec \
  "termite \
   -t \"${TITLE}\" \
   -e 'tmux new-session -A -s music \"ncmpcpp\"'"
